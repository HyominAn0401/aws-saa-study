### 📝 004. Bastion Host를 이용한 계층형 보안 접속 
**문제:** 한 회사는 최근 프라이빗 서브넷의 EC2에서 리눅스 기반 애플리케이션 인스턴스를 시작했고 VPC의 퍼블릭 서브넷에EC2인스턴스에서 리눅스 기반 배스천호스트를 시작했습니다. 솔루션 설계자는 회사의 인터넷 연결을 통해 온프레미스 네트워크에서 배스천 호스트 및 애플리케이션 서버에 연결해야 합니다. 솔루션 설계자는 모든 ec2 인스턴스의 보안 그룹이 해당 액세스를 허용하는지 확인해야 합니다.

---

### 🔍 1. 키워드 검색 (Pre-study)
선택지에 나온 핵심 서비스와 보안 개념 정리

| 서비스/용어명 | 핵심 키워드 | 특징 |
| :--- | :--- | :--- |
| **Bastion Host** | 관리형 프록시 역할 | 외부에서 프라이빗 서브넷 인스턴스에 접근하기 위한 관문 서버 |
| **보안그룹(Security Group)** | 인스턴스 레벨 방화벽 | IP/Port 기반 인바운드/아웃바운드 제어 |
| **공인, 사설 IP** | 외부 vs 내부 주소 | 인터넷 접속은 공인, VPC 내부끼리는 사설 IP |


---

### 🎯 2. 요구사항 분석 (Requirements)
* **프라이빗 서브넷 애플리케이션 인스턴스**: 외부 인터넷에서 직접 접근이 불가능하므로 퍼블릭 서브넷의 Bastion Host 경유 필요
* **회사의 인터넷 연결을 통해 온프레미스 네트워크에 연결**: 접속 트래픽이 회사의 외부 공인 IP를 통해 들어와야 함
* **리눅스 기반 인스턴스**: 원격 관리를 위해 SSH(22번 포트) 허용 필수
* **보안 그룹 액세스 허용**: 각 단계별 인바운드 규칙이 올바른 IP 대역 허용하는지 검증 필요 

---

### ✅ 3. 선택지 분석 및 풀이 (Analysis)

- [ ] **A**: Bastion의 보안그룹을 애플리케이션 인스턴스로부터의 인바운드 액세스만 허용하는 보안 그룹으로 교체
    - **이유**: 트래픽 방향이 반대로 설정됨
- [ ] **B**: Bastion의 보안그룹을 회사 내부 IP 범위의 인바운드 액세스만 허용하는 보안 그룹으로 교체 
    - **이유**: 회사 내부(사설IP)는 인터넷을 통해 VPC로 접근 불가해 연결이 불가능 
- [X] **C**: Bastion의 보안그룹을 회사의 외부 IP 범위로부터의 인바운드 액세스만 허용하는 보안 그룹으로 교체 
    - **결과**: **정답**
    - **이유**: 회사의 인터넷 연결을 통해 들어오는 트래픽 식별 
- [x] **D**: 애플리케이션 인스턴스의 보안그룹을 Bastion의 사설 IP주소에서만 인바운드 SSH 액세스를 허용하는 보안 그룹으로 바꿈 
    - **결과**: **정답**
    - **이유**: 동일 VPC 내의 Bastion Host로부터 오는 내부 트래픽을 허용하기 위한 설정 
- [ ] **E**: 애플리케이션 인스턴스의 보안그룹을 Bastion의 퍼블릭 IP주소에서만 인바운드 SSH 액세스를 허용하는 보안 그룹으로 바꿈 
    - **이유**: 동일 VPC 통신인데 퍼블릭IP를 사용하는 것은 비효율적, 보안에 취약 

---

### 💡 핵심 요약
##### 보안그룹 구성 사양
1. Bastion Host: 인바운드 SSH(22) 허용 / 온프레미스 외부 공인 IP
2. 애플리케이션 인스턴스: 인바운드 SSH(22) 허용 / Bastion Host 사설 IP
3. 경로 통제: 온프레미스 -> Bastion Host -> 애플리케이션 서버 순 연결 구조 완성 
