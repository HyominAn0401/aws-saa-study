### 📝 674. 데이터 쿼리 
RDS로 데이터베이스를 마이그레이션하고 평균 일일 워크로드에 맞게 DB 인스턴스 크기를 조정함. 달에 한 번 보고서에 대한 쿼리를 실행할 때 DB 성능이 느려져 보고서를 생성할 때 성능을 유지 관리할 수 있는 기능이 필요.

---

### 🎯 1. 요구사항 분석 
* **성능 격리**: 워크로드와 보고서 쿼리가 서로 간섭하지 않아야 함. 보고서 쿼리가 실행될 때 DB의 성능이 떨어지는 것이 현재 가장 큰 문제
* **운영 효율성**: 한 달에 한 번 발생하는 부하를 위해 수동으로 인스턴스 사양을 올리거나 내리는 건 운영 부담이 큼
* **비용 및 성능 최적화**: 보고서 작성 시에만 필요한 성능을 가장 경제적이고 효율적으로 확보해야 함 

---

### 🔍 2. 핵심 서비스 분석 

| 서비스/용어명 | 핵심 특징 | 비고 |
| :--- | :--- | :--- |
| **RDS Read Replica** | Master DB의 데이터를 복제해 읽기 전용 인스턴스를 생성<br>비동기식 복제 방식 사용 |  | 
| **Amazon Athena** | S3에 저장된 데이터를 표준 SQL을 사용해 직접 분석하는 **서버리스** 쿼리 서비스 | 대규모 데이터 분석에 유리하지만 RDS 연동 설정 필요 |
| **DB Instance Scaling** | 인스턴스의 사양 변경 | 다운타임 발생 가능 |
| **RDS Backup** | 특정 시점의 DB 상태를 저장, 복원 시 새로운 엔드포인트가 생성됨 | 복원에 시간이 오래 걸림 |

---

### ✅ 3. 선택지 분석 및 풀이 

- [ ] **A**: 읽기 전용 복제본 생성 + 쿼리를 읽기 전용 복제본으로 보냄 
    - **이유**: 24시간 인스턴스 유지 비용 발생 
- [ ] **B**: DB 백업 + 백업을 다른 DB 인스턴스로 복원
    - **이유**: 백업을 새 인스턴스로 복원하는 데 매우 오랜 시간 소요 
- [X] **C**: 데이터를 S3로 보냄 + Athena로 쿼리 
    - **결과**: **정답**
    - **이유**: 성능의 격리 + 쿼리할 때 스캔한 데이터 양만큼의 비용 발생
- [ ] **D**: DB 인스턴스 크기 조정 
    - **이유**: 근본적 문제 해결되지 않음 

---

### 💡 핵심 요약
1. 보고서 쿼리가 매일/수시로 일어남 -> Read Replica (실시간 동기화 필요)
2. 보고서 쿼리가 가끔 일어나고 비용 아끼고 싶음 -> Athena (배치형 분석)
3. Athena: S3에 저장된 데이터에 SQL 쿼리를 실행할 수 있는 서비스. 서버리스로 인프라 관리할 필요가 없고 실행한 쿼리와 스캔한 데이터 양에 대해서만 비용을 지불한다<br>
    1. DB 인스턴스 영향 X: 데이터를 S3로 내보내 분석하기 때문에 쿼리가 RDS 본체 성능에 영향을 주지 않는다
    2. 비용 및 복잡성 감소: 읽기 전용 복제본은 24시간 내내 인스턴스 유지 비용이 발생하지만 Athena는 한 달에 한 번 쿼리할 때만 비용이 발생한다
    3. 확장성 및 유연성: 데이터 양이 많아져도 S3, Athena 성능 한계를 걱정할 필요 없다 