### 📝 679. SaaS 데이터 수집 및 알림 아키텍처 서버리스화
회사는 다수의 SaaS 소스로부터 데이터를 수집하여 EC2에서 처리 후 S3에 업로드하고, 사용자에게 알림을 보내는 워크플로우를 운영 중임. 현재 EC2 단일 지점의 **성능 저하**가 발생하고 있으며, **최소한의 운영 오버헤드**로 이를 해결해야 함.


---

### 🎯 1. 요구사항 분석 (Requirements)
* **결합도 해소**
    - 단일 EC2 인스턴스가 데이터 수집, 업로드, 사용자 알림을 동기적으로 처리하며 병목 발생
    - 수집, 저장, 알림 단계를 이벤트 기반으로 분리(Decoupling)해 의존성 제거 필요
* **최소한의 운영 오버헤드**
    - EC2, 컨테이너 등 인프라 운영 최소화
    - 완전 관리형(Serverless, Fully Managed) 서비스 우선 사용

---

### 🔍 2. 핵심 서비스 분석 (AWS Documentation 기반)

| 서비스/용어명 | 핵심 특징 | 비고 |
| :--- | :--- | :--- |
| **Amazon AppFlow** | SaaS 서비스와 AWS 간 데이터 전송을 자동화(수집, 전송)하는 완전 관리형 서비스 | 코드 작성 불필요 |
| **Amazon S3 이벤트 알림** | S3 버킷 내 특정 이벤트 발생 시 Lambda, SQS 등으로 알림 전달 | |
| **Amazon EventBridge** | AWS 서비스 및 SaaS 이벤트 수집, 필터링, 전달하는 서버리스 이벤트 버스 | 데이터 파일 전송 목적엔 부적합 |
| **Amazon ECS(Elastic Container Service)** | Docker 컨테이너를 지원하는 컨테이너 관리 서비스 | 운영 오버헤드 존재 |
| **Container Insights** | ECS/EKS 컨테이너 메트릭, 로그 수집을 위한 모니터링 기능 | 알림 트리거 기능 X |
| **Amazon SNS(Simple Notification Service)** | 관리형 Pub/Sub 메시징 서비스, 다수의 구독자에게 알림 전송 | 사용자 알림을 컴퓨트에서 분리해 비동기 처리 |

---

### ✅ 3. 선택지 분석 및 풀이 (Analysis)

- [ ] **A**: ASG + S3 Event + SNS
    - **이유**: ASG는 인스턴스 수를 조절, EC2 내 동작하는 데이터 수집 로직 복잡성과 관리 오버헤드를 줄이지 못함  
- [X] **B**: Amazon AppFlow + S3 Event + SNS
    - **결과**: **정답**
    - **이유**: AppFlow가 데이터 수집과 전송 대체 + S3 이벤트가 완료 시점 감지 + SNS가 알림 전담. 인프라 관리가 필요없는 완전 서버리스 조합  
- [ ] **C**: EventBridge(SaaS 연동) + EventBridge(알림)
    - **이유**: EventBridge는 특정 SaaS 파트너와 연동되지만 모든 SaaS 소스의 데이터를 S3로 전송하는 주체로는 AppFlow가 더 적합함. 두 번의 규칙 설정보다 Appflow+S3 연동이 더 효율적 
- [ ] **D**: ECS + Container Insights
    - **이유**: Container Insights는 모니터링 대시보드용 도구로 알림을 보내는 것이 아님. ECS는 EC2 관리 요소가 많음 

---

### 💡 핵심 요약
1. SaaS 데이터 수집/전송 => AppFlow가 EC2 대신함
2. 관리 최소화 = EC2/ECS 지우기 (서버리스 서비스 위주 선택)
3. 알림 연동 = S3 이벤트 -> SNS (중간에 EC2 낄 필요 없음)